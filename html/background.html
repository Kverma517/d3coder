<!--
/**
 * @version 0.3
 * @author Maik Kulbe <info@linux-web-development.de>
 * @copyright (c) 2010 Maik Kulbe
 */ --> 
<script type="text/javascript" src="../js/mootools.js"></script>
<script type="text/javascript" src="../js/D3.js"></script>
<script>

D3.checkInstall();

/**
 * TODO: reload menus
 */
var menu = 
	{
		"title": "Decode", 
		"contexts":["selection", "editable"]
	};


var idMain=chrome.contextMenus.create(menu);

/**
 * MENU ITEM DEFINITIONS
 */
if(localStorage.getItem("functions_rot13") == '1') {
	menu = {
			"title"		: "Rot13 Decode", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("rot13", D3.rot13decode(info.selectionText));}
		};

    var idRot=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_timestamp") == '1') {
	menu = {
			"title"		: "Unix timestamp to date conversion", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("Timestamp to Date", D3.timestampToDate(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_timestamp") == '1') {
	menu = {
			"title"		: "Unix timestamp to date conversion", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("Timestamp to Date", D3.timestampToDate(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_bin2hex") == '1') {
	menu = {
			"title"		: "bin2hex", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("bin2hex", D3.bin2hex(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_htmlentities") == '1') {
	menu = {
			"title"		: "HTML entities", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("HTML entities", D3.htmlentities(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_html_entity_decode") == '1') {
	menu = {
			"title"		: "HTML entity decode", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("HTML entity decode", D3.html_entity_decode(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_htmlspecialchars") == '1') {
	menu = {
			"title"		: "HTML specialchars", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("HTML specialchars", D3.htmlspecialchars(info.selectionText,2,null,true));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_htmlspecialchars_decode") == '1') {
	menu = {
			"title"		: "HTML specialchars decode", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("HTML specialchars decode", D3.htmlspecialchars_decode(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_md5") == '1') {
	menu = {
			"title"		: "MD5", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("MD5", D3.md5(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_sha1") == '1') {
	menu = {
			"title"		: "SHA1", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("SHA1", D3.sha1(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_quoted_printable_decode") == '1') {
	menu = {
			"title"		: "Quoted printable decode", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("Quoted printable decode", D3.quoted_printable_decode(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_quoted_printable_encode") == '1') {
	menu = {
			"title"		: "Quoted printable encode", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("Quoted printable encode", D3.quoted_printable_encode(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_escapeshellarg") == '1') {
	menu = {
			"title"		: "Escapeshellarg", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("Escapeshellarg", D3.escapeshellarg(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_base64_encode") == '1') {
	menu = {
			"title"		: "Base64 encode", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("Base64 encode", D3.base64_encode(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}

if(localStorage.getItem("functions_base64_decode") == '1') {
	menu = {
			"title"		: "Base64 decode", 
			"parentId"	: idMain,
			"contexts"	: ["selection", "editable"],
			"onclick"	: function(info, tab){D3.createPopup("Base64 decode", D3.base64_decode(info.selectionText));}
		};
	
	var idTimestamp=chrome.contextMenus.create(menu);
}
</script>